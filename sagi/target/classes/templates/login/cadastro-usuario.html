<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/templateLogin}">
<th:block layout:fragment="title">
    <title>SAGI Basic SENAI | Cadastro do Usuário</title>
</th:block>
<body>
<th:block layout:fragment="content">
    <div class="mar-ver pad-btm">
        <span class="h3">Cadastro de Usuário</span>
    </div>
    <form class="form-signin text-left" th:method="POST" th:object="${dto}" th:action="@{/cadastro-usuario}">
        <th:block th:if="${success eq true}">
            <p class="text-success" th:text="${msg}"></p>
        </th:block>
        <div class="form-group">
            <h6>Nome e Sobrenome</h6>
            <input type="text" class="form-control"
                   th:classappend="${not #maps.isEmpty(errors) and #maps.containsKey(errors, 'nome')} ? 'panel-bordered-danger'"
                   placeholder="Nome e Sobrenome" name="nome"
                   autofocus="" required>
            <th:block th:if="${not #maps.isEmpty(errors)}">
                <th:block th:if="${#maps.containsKey(errors, 'nome')}">
                    <p class="text-danger" th:text="${errors.get('nome')}"></p>
                </th:block>
            </th:block>
        </div>
        <div class="form-group">
            <h6>Email</h6>
            <input type="email" class="form-control"
                   th:classappend="${not #maps.isEmpty(errors) and #maps.containsKey(errors, 'email') or error eq true} ? 'panel-bordered-danger'"
                   placeholder="Email do usuário" name="email"
                   autofocus="" required>
            <th:block th:if="${not #maps.isEmpty(errors)}">
                <th:block th:if="${#maps.containsKey(errors, 'email')}">
                    <p class="text-danger" th:text="${errors.get('email')}"></p>
                </th:block>
            </th:block>
            <th:block th:if="${#bools.isTrue(error)}">
                <p class="text-danger" th:text="${msg}"></p>
            </th:block>
        </div>
        <div class="form-group">
            <h6>Senha</h6>
            <input type="password" class="form-control"
                   th:classappend="${not #maps.isEmpty(errors) and #maps.containsKey(errors, 'senha')} ? 'panel-bordered-danger'"
                   placeholder="Digite a sua senha" name="senha"
                   autofocus="" required>
            <th:block th:if="${not #maps.isEmpty(errors)}">
                <th:block th:if="${#maps.containsKey(errors, 'senha')}">
                    <p class="text-danger" th:text="${errors.get('senha')}"></p>
                </th:block>
            </th:block>
        </div>
        <div class="form-group">
            <h6>Confirmar Senha</h6>
            <input type="password" class="form-control"
                   th:classappend="${not #maps.isEmpty(errors) and #maps.containsKey(errors, 'confirmacaoSenha')} ? 'panel-bordered-danger'"
                   placeholder="Confirme a senha" name="confirmacaoSenha"
                   autofocus="" required>
            <th:block th:if="${not #maps.isEmpty(errors)}">
                <th:block th:if="${#maps.containsKey(errors, 'confirmacaoSenha')}">
                    <p class="text-danger" th:text="${errors.get('confirmacaoSenha')}"></p>
                </th:block>
            </th:block>
        </div>

        <div class="form-group">
            <input type="hidden" class="form-control" name="${_csrf.parameterName}"
                   value="${_csrf.token}"/>
        </div>
        <button class="btn btn-primary btn-lg btn-block">Enviar</button>
        <br>
        <a type="button" class="btn btn-danger btn-lg btn-block" th:href="@{/login}">Voltar para o login</a>
    </form>
</th:block>
</body>
</html>
